<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="TermiusCN_Tool.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:TermiusCN_Tool.Converters"
    mc:Ignorable="d">

    <ScrollViewer>
        <StackPanel Padding="24" Spacing="24" MaxWidth="900" HorizontalAlignment="Center">

            <TextBlock Text="ËÆæÁΩÆ" Style="{StaticResource TitleTextBlockStyle}"/>

            <!-- Termius Ë∑ØÂæÑ -->
            <StackPanel Spacing="8">
                <TextBlock Text="Termius ÂÆâË£ÖË∑ØÂæÑ" Style="{StaticResource SubtitleTextBlockStyle}"/>
                <Grid ColumnDefinitions="*,Auto" ColumnSpacing="8">
                    <TextBox Grid.Column="0"
                            Text="{x:Bind ViewModel.CustomPath, Mode=TwoWay}"
                            PlaceholderText="ÁïôÁ©∫ÂàôËá™Âä®Ê£ÄÊµãÈªòËÆ§Ë∑ØÂæÑ"/>
                    <Button Grid.Column="1"
                           Content="ÊµèËßà..."
                           Command="{x:Bind ViewModel.BrowseCommand}"/>
                </Grid>
                <TextBlock Text="ÈªòËÆ§Ë∑ØÂæÑ: %LOCALAPPDATA%\Programs\Termius"
                          FontSize="12"
                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                <Border Background="{ThemeResource AccentFillColorDefaultBrush}" 
                        CornerRadius="8" 
                        Padding="12"
                        Margin="0,8,0,0">
                    <StackPanel Spacing="4">
                        <TextBlock Text="üí° Êô∫ËÉΩÊ£ÄÊµãÊèêÁ§∫" 
                                  FontSize="12" 
                                  FontWeight="SemiBold"
                                  Foreground="White"/>
                        <TextBlock TextWrapping="Wrap" 
                                  FontSize="11"
                                  Foreground="White">
                            ÁïôÁ©∫Êó∂Ëá™Âä®Ê£ÄÊµãÈ°∫Â∫èÔºö‚ë† ÈªòËÆ§Ë∑ØÂæÑ ‚Üí ‚ë° ËøêË°å‰∏≠ÁöÑ Termius ËøõÁ®ã
                        </TextBlock>
                        <TextBlock TextWrapping="Wrap" 
                                  FontSize="11"
                                  Foreground="White"
                                  Margin="0,4,0,0">
                            üí° Â¶ÇÊú™ÊâæÂà∞ÔºåËØ∑ÂÖàÂêØÂä® TermiusÔºåÁÑ∂ÂêéÂú®‰∏ªÈ°µÁÇπÂáª„ÄåÂà∑Êñ∞Áä∂ÊÄÅ„ÄçÊåâÈíÆ
                        </TextBlock>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- ÈªòËÆ§Ê±âÂåñÁ±ªÂûã -->
            <StackPanel Spacing="8">
                <TextBlock Text="ÈªòËÆ§Ê±âÂåñÁ±ªÂûã" Style="{StaticResource SubtitleTextBlockStyle}"/>
                <ComboBox SelectedIndex="{x:Bind ViewModel.DefaultTypeIndex, Mode=TwoWay}"
                         HorizontalAlignment="Stretch">
                    <ComboBoxItem Content="Ê†áÂáÜÁâà (‰ªÖÊ±âÂåñ)"/>
                    <ComboBoxItem Content="ËØïÁî®Áâà (Êé®Ëçê)"/>
                    <ComboBoxItem Content="Á¶ªÁ∫øÁâà (Ë∑≥ËøáÁôªÂΩï)"/>
                </ComboBox>
                <TextBlock Text="ËÆæÁΩÆÂêØÂä®Êó∂ÈªòËÆ§ÈÄâ‰∏≠ÁöÑÊ±âÂåñÁâàÊú¨Á±ªÂûã"
                          FontSize="12"
                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
            </StackPanel>

            <!-- HTTP ‰ª£ÁêÜ -->
            <StackPanel Spacing="8">
                <TextBlock Text="HTTP ‰ª£ÁêÜ (ÂèØÈÄâ)" Style="{StaticResource SubtitleTextBlockStyle}"/>
                <TextBox Header="‰ª£ÁêÜÂú∞ÂùÄ"
                        Text="{x:Bind ViewModel.ProxyAddress, Mode=TwoWay}"
                        PlaceholderText="‰æãÂ¶Ç: 127.0.0.1"/>
                <NumberBox Header="‰ª£ÁêÜÁ´ØÂè£"
                          Value="{x:Bind ViewModel.ProxyPort, Mode=TwoWay}"
                          PlaceholderText="‰æãÂ¶Ç: 7890"
                          Minimum="0"
                          Maximum="65535"
                          SpinButtonPlacementMode="Compact"/>
                <Button Command="{x:Bind ViewModel.TestProxyCommand}"
                       IsEnabled="{x:Bind ViewModel.IsTesting, Mode=OneWay, Converter={StaticResource InverseBoolConverter}}">
                    <Button.Content>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <ProgressRing Width="16" Height="16"
                                        IsActive="{x:Bind ViewModel.IsTesting, Mode=OneWay}"
                                        Visibility="{x:Bind ViewModel.IsTesting, Mode=OneWay}"/>
                            <TextBlock Text="ÊµãËØïËøûÊé•"/>
                        </StackPanel>
                    </Button.Content>
                </Button>
                <TextBlock Text="ÈÖçÁΩÆ‰ª£ÁêÜÂèØËß£ÂÜ≥Êó†Ê≥ïËÆøÈóÆ GitHub ÁöÑÈóÆÈ¢ò"
                          FontSize="12"
                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
            </StackPanel>

            <!-- ÂÖ∂‰ªñÈÄâÈ°π -->
            <StackPanel Spacing="16">
                <TextBlock Text="ÂÖ∂‰ªñÈÄâÈ°π" Style="{StaticResource SubtitleTextBlockStyle}"/>

                <ToggleSwitch Header="ÂêØÂä®Êó∂Ê£ÄÊü•Êõ¥Êñ∞"
                             IsOn="{x:Bind ViewModel.AutoCheckUpdate, Mode=TwoWay}"
                             OnContent="ÂºÄÂêØ"
                             OffContent="ÂÖ≥Èó≠"/>

                <ToggleSwitch Header="ÊòæÁ§∫Ë≠¶ÂëäÂØπËØùÊ°Ü"
                             IsOn="{x:Bind ViewModel.ShowWarnings, Mode=TwoWay}"
                             OnContent="ÂºÄÂêØ"
                             OffContent="ÂÖ≥Èó≠"/>
            </StackPanel>

            <!-- Êìç‰ΩúÊåâÈíÆ -->
            <StackPanel Spacing="12">
                <Button Content="‰øùÂ≠òËÆæÁΩÆ"
                       Style="{StaticResource AccentButtonStyle}"
                       Command="{x:Bind ViewModel.SaveCommand}"
                       HorizontalAlignment="Stretch"
                       Height="40"/>

                <Button Content="ÊÅ¢Â§çÈªòËÆ§ËÆæÁΩÆ"
                       Command="{x:Bind ViewModel.ResetToDefaultCommand}"
                       HorizontalAlignment="Stretch"/>
            </StackPanel>

            <!-- Âç±Èô©Âå∫Âüü -->
            <Border Background="{ThemeResource SystemFillColorCriticalBackgroundBrush}"
                    BorderBrush="{ThemeResource SystemFillColorCriticalBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="16">
                <StackPanel Spacing="12">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE7BA;" Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
                        <TextBlock Text="Âç±Èô©Âå∫Âüü" 
                                  Style="{StaticResource SubtitleTextBlockStyle}"
                                  Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
                    </StackPanel>
                    
                    <TextBlock Text="Ê∏ÖÈô§ÊâÄÊúâÂ∫îÁî®Êï∞ÊçÆÔºåÂåÖÊã¨Â§á‰ªΩÊñá‰ª∂„ÄÅÈÖçÁΩÆÊñá‰ª∂ÂíåÁºìÂ≠ò„ÄÇÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄ„ÄÇ"
                              TextWrapping="Wrap"
                              FontSize="12"/>
                              
                    <Button Content="Ê∏ÖÈô§ÊâÄÊúâÊï∞ÊçÆÂπ∂ÈÄÄÂá∫"
                           Background="{ThemeResource SystemFillColorCriticalBrush}"
                           Foreground="White"
                           Command="{x:Bind ViewModel.ClearAllDataCommand}"
                           HorizontalAlignment="Stretch"/>
                </StackPanel>
            </Border>

            <!-- ÂÖ≥‰∫é‰ø°ÊÅØ -->
            <StackPanel Spacing="8" Padding="16" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                       CornerRadius="8">
                <TextBlock Text="ÂÖ≥‰∫é" Style="{StaticResource SubtitleTextBlockStyle}"/>
                <TextBlock TextWrapping="Wrap">
                    <Run Text="Termius Ê±âÂåñÂ∑•ÂÖ∑ v1.0"/>
                    <LineBreak/>
                    <Run Text="Âü∫‰∫é .NET 10 + WinUI 3 ÂºÄÂèë" FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <LineBreak/>
                    <LineBreak/>
                    <Run Text="Ê±âÂåñÊñá‰ª∂Êù•Ê∫ê: " FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <Hyperlink NavigateUri="https://github.com/ArcSurge/Termius-Pro-zh_CN">
                        <Run Text="ArcSurge/Termius-Pro-zh_CN"/>
                    </Hyperlink>
                </TextBlock>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>

    <Page.Resources>
        <converters:InverseBoolConverter x:Key="InverseBoolConverter"/>
    </Page.Resources>
</Page>
